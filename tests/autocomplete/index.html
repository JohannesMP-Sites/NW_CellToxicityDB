<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="urf-8">
    <meta name="viewport" content="width=520, initial-scale=0.60">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>6Mer Autocomplete test</title>
    <base href="/" target="_blank">

    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/apple-touch-icon-precomposed.png">
    <link rel="shortcut icon" href="assets/favicon.ico">

    <!-- JQuery -->
    <script src="assets/vendor/jquery-3.3.1/jquery.min.js"></script>
    <!-- JQuery Highlight -->
    <script src="assets/vendor/jquery-highlight/jquery.highlight.min.js"></script>

    <!-- Easy Autocomplete-->
    <script src="assets/vendor/easyautocomplete-1.3.5/jquery.easy-autocomplete.js"></script>
    <link rel="stylesheet" href="assets/vendor/easyautocomplete-1.3.5/easy-autocomplete.css">

    <!-- Async -->
    <script src="assets/vendor/async-2.6.0/async.min.js"></script>

    <!-- D3.js -->
    <script src="assets/vendor/d3-4.13.0/d3.min.js"></script>

    <!-- BlobJS - FileSaverJS dependency -->
    <script src="assets/vendor/blobjs/blob.js"></script>
    <!-- FileSaverJS - More support for older browsers -->
    <script src="assets/vendor/filesaverjs-1.3.5/filesaver.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="assets/vendor/bootstrap-4.0.0/css/bootstrap.min.css">
    <script src="assets/vendor/bootstrap-4.0.0/js/bootstrap.min.js"></script>

    <!-- Bootstrap Toggle -->
    <link rel="stylesheet" href="assets/vendor/bootstrap-toggle-2.2.2/css/bootstrap-toggle.min.css">
    <script src="assets/vendor/bootstrap-toggle-2.2.2/js/bootstrap-toggle.min.js"></script>

    <!-- DataTables -->
    <link rel="stylesheet" href="assets/vendor/datatables-1.10.16/css/datatables.min.css">
    <script src="assets/vendor/datatables-1.10.16/js/datatables.min.js"></script>

    <!-- FontAwesome -->
    <link rel="stylesheet" href="assets/vendor/fontawesome-free-5.0.8/css/fontawesome-all.min.css">


    <link rel="stylesheet" href="assets/css/main.css">


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115418404-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-115418404-1');
    </script>

</head>

<body class="bg-nw">
    <div class="container-fluid">

    <div class="row">
        <div class="col">
            <div id="header-box">
                <h2>6Mer Autocomplete test</h2>
                <p>A tool to determine the toxicity of any siRNA, shRNA or miRNA with known 6mer seed sequence.</p>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="card">
                <div class="card-header">
                    <div class="form-row">
                        <div class="col-md-auto">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <label for="data-seed-field" class="input-group-text" disabled>Seed</label>
                                </div>
                                <input type="text" id="data-seed-field" class="form-control" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Nucleotides" disabled>
                            </div>
                        </div>

                        <div class="col">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <label for="data-mirna-field" class="input-group-text">miRNA hsa-</label>
                                </div>
                                <!-- wrap to maintain form-control style, since field will get wrapped by autocomplete plugin-->
                                <div class="form-control autocomplete-field-wrapper">
                                    <input type="text" id="data-mirna-field" class="wrapped-autocomplete-field" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="mature miRNA or accession number" >
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-auto">
                            <div class="form-row">
                                <div class="col-auto">
                                    <button id="reset-button" class="btn btn-danger" disabled>Reset</button>
                                </div>
                                <div class="col-auto">
                                    <button id="save-button" class="btn btn-success" aria-describedby="save-button-help" disabled><i class="fas fa-download"></i><span class="d-xs-inline d-sm-none d-lg-inline"> Download CSV</span></button>
                                </div>
                            </div>
                        </div>

                        <style>
                            .input-group .form-control.autocomplete-field-wrapper {
                                padding: 0;
                            }
                            .input-group input.wrapped-autocomplete-field {
                                position: relative;
                                padding: .375rem .75rem;
                                border: none;
                                width: 100%;
                            }

                            .eac-item .mi-arm-marker {
                                display: inline-block;
                                position:relative;
                                top: 3px;
                                width: 2.1rem;
                                height: 1.1rem;

                                margin-top: -5px;
                                margin-right: 0.5rem;

                                border-radius: .25rem;
                                border: #42375d solid 2px;
                                border-left-width: 5px;
                                border-right-width: 5px;
                            }

                            .eac-item .mi-arm-marker.mi-arm-dom {
                                background-color: #6c5c91; 
                            }
                            .eac-item .mi-arm-marker.mi-arm-dom:hover {
                                background-color: #382e50; 
                            }
                            
                            .eac-item .mi-arm-marker.mi-arm-less {
                                background-color: #c8c3d4;
                                border-color: #ada5c2;
                            }
                            .eac-item .mi-arm-marker.mi-arm-less:hover {
                                background-color: #9188a9;
                                border-color: #7a728e;
                            }

                            .eac-item .mi-arm-marker.mi-arm-drosha {
                                border-color: #efc74f !important;
                            }

                            .eac-item .mi-arm-marker.mi-arm-mirtron {
                                border-color: #4196d8 !important;
                            }


                            .eac-item .hsa-prefix {
                                opacity: 0.5;
                                font-style: italic;
                            }

                        </style>

                        <script type="text/javascript">
                            var FilterMiRNAString = function(str) {
                                str = "hsa-" + str.replace("hsa-", "")
                                return str.replace(/-/g,"").toLowerCase();
                            }

                            $(function() {



                                var options = {
                                    url: "tests/autocomplete/miRNAs.json",

                                    getValue: function(element) {
                                            return element.mi_rna.replace("hsa-", "")
                                        },

                                    template: {
                                            type: "custom",
                                            method: function(value, item) {
                                                let dom = item.dom ? " mi-arm-dom" : " mi-arm-less";
                                                let drosha = item.drosha ? " mi-arm-drosha" : "";
                                                let mirtron = item.mirtron ? " mi-arm-mirtron" : "";
                                                let classes = "mi-arm-marker" + dom + drosha + mirtron;
                                                let marker = '<div class="' + classes + '"></div>';
                                                return marker + '<span class="hsa-prefix">hsa-</span>' + value;
                                            }
                                        },

                                    adjustWidth: false,
                                    list: {   
                                        match: {
                                            enabled: true
                                        },
                                        maxNumberOfElements: 30,
                                    },
                                };



                                $("#data-mirna-field").easyAutocomplete(options);
                            });
                        </script>

                    </div>
                </div>

                <div class="card-body">
                    <i>Filtered Table would appear here...</i>
                    <br />
                </div>

             </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="card card-dark">
                <div class="card-header"></div>
                <div class="card-body">
                    <h5 class="card-title">BETA Info</h5>
                    <p>Type in the <b>miRNAs</b> search field. It will auto-complete to show matching miRNAs.<p>
                    <p>Note that the other search elements are only there as placeholder, and are not functional here.</p>
                
                    <hr>

                    <h5 class="card-title">Info</h5>
                    <p>This site allows to determine the activity of any siRNA, shRNA, or miRNA to be toxic through its 6mer seed sequence in human (<i>HeyA8 - ovarian</i> and <i>H460 - lung</i>) and mouse (<i>M565 - liver and 3LL - lung</i>) cancer cell lines.
                    </p><ul><li>miRNAs with low viability (high toxicity, <div class="badge badget-light red-badge">red color</div>) will likely be tumor suppressive.</li><li>miRNAs with high viability (low toxicity, <div class="badge badget-light green-badge">green color</div>) can be tumor promoting.</li></ul><p></p>

                    <p>Enter one of 4096 possible 6mers into the search field, any nucleotide sequence of less than 6 nucleotides, or the name of any miRNA or mature miRNA listed at <a href="http://mirbase.org">mirbase.org</a>. Use positions 2-7 of the guide/antisense strand of the siRNA duplex as the 6mer.</p>

                    <p>Click on a miRNA in the results to be taken to the mirbase site describing the miRNA.</p>
                    <ul>
                        <li>Mature miRNAs representing the predominant arm are shown in <div style="border-color: #8d7eaf66" class="badge badge-light mi-arm mi-arm-dom">dark purple</div>.</li>
                        <li>Mature miRNAs representing the lesser expressed arm (the * activity) are shown in <div style="border-color: #e3dff0" class="badge badge-light mi-arm mi-arm-less">light purple</div>.</li>
                        <li>miRNAs that are highly expressed and processed by Drosha (RISC bound in wild-type but not Drosha k.o. HCT116 cells)  have a <div class="badge badge-light mi-arm mi-arm-dom mi-arm-drosha">yellow</div> <div class="badge badge-light mi-arm mi-arm-less mi-arm-drosha">outline</div>.
                        <ul>
                            <li>All other miRNAs are either not processed by Drosha (i.e. miR-320a), miRtrons, or not significantly expressed in HCT116 cells.</li>
                        </ul>
                        </li>
                        <li>miRtrons have a <div class="badge badge-light mi-arm mi-arm-dom mi-arm-mirtron">blue</div> <div class="badge badge-light mi-arm mi-arm-less mi-arm-mirtron">outline</div> .</li>
                    </ul>

                </div>



                <div class="card-footer"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
